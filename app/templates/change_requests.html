{% extends "base.html" %}
{% block title %}Change Requests - Vault{% endblock %}

{% block content %}
<div class="page-header">
    <h1>
        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor" class="me-2"><path d="M1.5 3.25a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zm5.677-.177L9.573.677A.25.25 0 0110 .854V2.5h1A2.5 2.5 0 0113.5 5v5.628a2.251 2.251 0 11-1.5 0V5a1 1 0 00-1-1h-1v1.646a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354z"/></svg>
        Change Requests
    </h1>
</div>

<!-- Status filter tabs -->
<ul class="nav nav-tabs mb-3" id="cr-tabs">
    <li class="nav-item"><a class="nav-link active" href="#" data-status="">All</a></li>
    <li class="nav-item"><a class="nav-link" href="#" data-status="draft">Draft</a></li>
    <li class="nav-item"><a class="nav-link" href="#" data-status="pending_review">Pending Review</a></li>
    <li class="nav-item"><a class="nav-link" href="#" data-status="approved">Approved</a></li>
    <li class="nav-item"><a class="nav-link" href="#" data-status="merged">Merged</a></li>
    <li class="nav-item"><a class="nav-link" href="#" data-status="rejected">Rejected</a></li>
    <li class="nav-item"><a class="nav-link" href="#" data-status="closed">Closed</a></li>
</ul>

<div class="card">
    <div class="card-body p-0" id="cr-list">
        <div class="loading-spinner"><div class="spinner-border spinner-border-sm me-2"></div> Loading...</div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<style>
.nav-tabs { border-bottom-color: var(--border-default); }
.nav-tabs .nav-link {
    color: black !important;
    border: none;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
}
.nav-tabs .nav-link:hover { color: black !important; border: none; }
.nav-tabs .nav-link.active {
    color: black !important;
    background: transparent;
    border: none;
    border-bottom: 2px solid var(--accent);
}
</style>
<script>
document.addEventListener('DOMContentLoaded', () => {
    initChangeRequests('');

    document.querySelectorAll('#cr-tabs .nav-link').forEach(tab => {
        tab.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelectorAll('#cr-tabs .nav-link').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            initChangeRequests(tab.dataset.status);
        });
    });
});
</script>
{% endblock %}
